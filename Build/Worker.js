"use strict";var _prototypeProperties=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},LeWorker=function(){function e(t){_classCallCheck(this,e),this.Worker=t,this.Triggers={},this.Callbacks={},this.Worker.addEventListener("message",function(e){"object"!=typeof e.data&&(this.Error("Invalid Arguments"),this.Error(e.data)),this.Trigger(e.data.Type,{ID:e.data.ID,Data:e.data.Data,Result:null})}.bind(this)),this.On("job",function(e){var t=e.ID;this.Callbacks[t](e.Data),delete this.Callbacks[t]}.bind(this)),this.Broadcast("welcome"),this.On("ping",function(e){e.Result="Yesh It works",this.Finished(e)}.bind(this))}return _prototypeProperties(e,null,{Finished:{value:function(e){this.Worker.postMessage({Type:"job",Data:e.Result,ID:e.ID})},writable:!0,configurable:!0},Send:{value:function(e,t){return t=t||{},new Promise(function(r){var i=(Math.random()+1).toString(36).substring(7);try{if(null===this.Callbacks)return;this.Callbacks[i]=r,this.Worker.postMessage({Type:e,ID:i,Data:t})}catch(s){this.Error("Error Caught"),this.Error(s)}}.bind(this))},writable:!0,configurable:!0},Broadcast:{value:function(e,t){t=t||{},this.Worker.postMessage({Type:e,ID:null,Data:t})},writable:!0,configurable:!0},Debug:{value:function(e){this.Worker.postMessage({Type:"Debug",ID:null,Data:e})},writable:!0,configurable:!0},Error:{value:function(e){this.Worker.postMessage({Type:"Error",ID:null,Data:e})},writable:!0,configurable:!0},Trigger:{value:function(e,t){if(null!==this.Triggers&&this.Triggers.hasOwnProperty(e))for(var r in this.Triggers[e])this.Triggers[e].hasOwnProperty(r)&&this.Triggers[e][r](t)},writable:!0,configurable:!0},On:{value:function(e,t){var r=e.split(".");"undefined"==typeof r[1]&&(r[1]=(Math.random()+1).toString(36).substring(7)),"undefined"==typeof this.Triggers[r[0]]&&(this.Triggers[r[0]]={}),this.Triggers[r[0]][r[1]]=t},writable:!0,configurable:!0},Off:{value:function(e){var t=e.split(".");"undefined"==typeof t[1]?delete this.Triggers[t[0]]:delete this.Triggers[t[0]][t[1]]},writable:!0,configurable:!0}}),e}(),DWorker=new LeWorker(self);